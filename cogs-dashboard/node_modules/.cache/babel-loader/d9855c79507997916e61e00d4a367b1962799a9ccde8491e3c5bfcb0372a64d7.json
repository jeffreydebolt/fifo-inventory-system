{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Auth}from'@supabase/auth-ui-react';import supabaseClient from'../lib/supabaseClient';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const AuthGuard=_ref=>{let{children}=_ref;const[user,setUser]=useState(null);const[loading,setLoading]=useState(true);useEffect(()=>{// Get initial session\nconst getSession=async()=>{var _session$user;const{data:{session}}=await supabaseClient.auth.getSession();setUser((_session$user=session===null||session===void 0?void 0:session.user)!==null&&_session$user!==void 0?_session$user:null);setLoading(false);};getSession();// Listen for auth changes\nconst{data:{subscription}}=supabaseClient.auth.onAuthStateChange(async(event,session)=>{var _session$user2;setUser((_session$user2=session===null||session===void 0?void 0:session.user)!==null&&_session$user2!==void 0?_session$user2:null);setLoading(false);});return()=>subscription.unsubscribe();},[]);if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"})});}if(!user){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center bg-gray-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-md w-full space-y-8\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"mt-6 text-center text-3xl font-extrabold text-gray-900\",children:\"Sign in to FIFO COGS\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-center text-sm text-gray-600\",children:\"Access your inventory cost tracking dashboard\"})]}),/*#__PURE__*/_jsx(Auth,{supabaseClient:supabaseClient,view:\"magic_link\",appearance:{variables:{default:{colors:{brand:'#2563eb',brandAccent:'#1d4ed8'}}}}})]})});}return/*#__PURE__*/_jsx(_Fragment,{children:children});};export default AuthGuard;","map":{"version":3,"names":["React","useEffect","useState","Auth","supabaseClient","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AuthGuard","_ref","children","user","setUser","loading","setLoading","getSession","_session$user","data","session","auth","subscription","onAuthStateChange","event","_session$user2","unsubscribe","className","view","appearance","variables","default","colors","brand","brandAccent"],"sources":["/Users/jeffreydebolt/Documents/fifo/cogs-dashboard/src/components/AuthGuard.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { Auth } from '@supabase/auth-ui-react'\nimport supabaseClient from '../lib/supabaseClient'\nimport type { User } from '@supabase/supabase-js'\n\ninterface AuthGuardProps {\n  children: React.ReactNode\n}\n\nconst AuthGuard: React.FC<AuthGuardProps> = ({ children }) => {\n  const [user, setUser] = useState<User | null>(null)\n  const [loading, setLoading] = useState(true)\n\n  useEffect(() => {\n    // Get initial session\n    const getSession = async () => {\n      const { data: { session } } = await supabaseClient.auth.getSession()\n      setUser(session?.user ?? null)\n      setLoading(false)\n    }\n\n    getSession()\n\n    // Listen for auth changes\n    const { data: { subscription } } = supabaseClient.auth.onAuthStateChange(\n      async (event, session) => {\n        setUser(session?.user ?? null)\n        setLoading(false)\n      }\n    )\n\n    return () => subscription.unsubscribe()\n  }, [])\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\n      </div>\n    )\n  }\n\n  if (!user) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n        <div className=\"max-w-md w-full space-y-8\">\n          <div>\n            <h2 className=\"mt-6 text-center text-3xl font-extrabold text-gray-900\">\n              Sign in to FIFO COGS\n            </h2>\n            <p className=\"mt-2 text-center text-sm text-gray-600\">\n              Access your inventory cost tracking dashboard\n            </p>\n          </div>\n          <Auth \n            supabaseClient={supabaseClient} \n            view=\"magic_link\"\n            appearance={{\n              variables: {\n                default: {\n                  colors: {\n                    brand: '#2563eb',\n                    brandAccent: '#1d4ed8',\n                  },\n                },\n              },\n            }}\n          />\n        </div>\n      </div>\n    )\n  }\n\n  return <>{children}</>\n}\n\nexport default AuthGuard"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,IAAI,KAAQ,yBAAyB,CAC9C,MAAO,CAAAC,cAAc,KAAM,uBAAuB,QAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAOlD,KAAM,CAAAC,SAAmC,CAAGC,IAAA,EAAkB,IAAjB,CAAEC,QAAS,CAAC,CAAAD,IAAA,CACvD,KAAM,CAACE,IAAI,CAAEC,OAAO,CAAC,CAAGb,QAAQ,CAAc,IAAI,CAAC,CACnD,KAAM,CAACc,OAAO,CAAEC,UAAU,CAAC,CAAGf,QAAQ,CAAC,IAAI,CAAC,CAE5CD,SAAS,CAAC,IAAM,CACd;AACA,KAAM,CAAAiB,UAAU,CAAG,KAAAA,CAAA,GAAY,KAAAC,aAAA,CAC7B,KAAM,CAAEC,IAAI,CAAE,CAAEC,OAAQ,CAAE,CAAC,CAAG,KAAM,CAAAjB,cAAc,CAACkB,IAAI,CAACJ,UAAU,CAAC,CAAC,CACpEH,OAAO,EAAAI,aAAA,CAACE,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAEP,IAAI,UAAAK,aAAA,UAAAA,aAAA,CAAI,IAAI,CAAC,CAC9BF,UAAU,CAAC,KAAK,CAAC,CACnB,CAAC,CAEDC,UAAU,CAAC,CAAC,CAEZ;AACA,KAAM,CAAEE,IAAI,CAAE,CAAEG,YAAa,CAAE,CAAC,CAAGnB,cAAc,CAACkB,IAAI,CAACE,iBAAiB,CACtE,MAAOC,KAAK,CAAEJ,OAAO,GAAK,KAAAK,cAAA,CACxBX,OAAO,EAAAW,cAAA,CAACL,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAEP,IAAI,UAAAY,cAAA,UAAAA,cAAA,CAAI,IAAI,CAAC,CAC9BT,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,MAAO,IAAMM,YAAY,CAACI,WAAW,CAAC,CAAC,CACzC,CAAC,CAAE,EAAE,CAAC,CAEN,GAAIX,OAAO,CAAE,CACX,mBACEV,IAAA,QAAKsB,SAAS,CAAC,+CAA+C,CAAAf,QAAA,cAC5DP,IAAA,QAAKsB,SAAS,CAAC,gEAAgE,CAAM,CAAC,CACnF,CAAC,CAEV,CAEA,GAAI,CAACd,IAAI,CAAE,CACT,mBACER,IAAA,QAAKsB,SAAS,CAAC,0DAA0D,CAAAf,QAAA,cACvEL,KAAA,QAAKoB,SAAS,CAAC,2BAA2B,CAAAf,QAAA,eACxCL,KAAA,QAAAK,QAAA,eACEP,IAAA,OAAIsB,SAAS,CAAC,wDAAwD,CAAAf,QAAA,CAAC,sBAEvE,CAAI,CAAC,cACLP,IAAA,MAAGsB,SAAS,CAAC,wCAAwC,CAAAf,QAAA,CAAC,+CAEtD,CAAG,CAAC,EACD,CAAC,cACNP,IAAA,CAACH,IAAI,EACHC,cAAc,CAAEA,cAAe,CAC/ByB,IAAI,CAAC,YAAY,CACjBC,UAAU,CAAE,CACVC,SAAS,CAAE,CACTC,OAAO,CAAE,CACPC,MAAM,CAAE,CACNC,KAAK,CAAE,SAAS,CAChBC,WAAW,CAAE,SACf,CACF,CACF,CACF,CAAE,CACH,CAAC,EACC,CAAC,CACH,CAAC,CAEV,CAEA,mBAAO7B,IAAA,CAAAI,SAAA,EAAAG,QAAA,CAAGA,QAAQ,CAAG,CAAC,CACxB,CAAC,CAED,cAAe,CAAAF,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}