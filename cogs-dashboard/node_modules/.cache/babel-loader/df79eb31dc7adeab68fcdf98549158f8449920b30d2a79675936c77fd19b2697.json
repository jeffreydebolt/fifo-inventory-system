{"ast":null,"code":"import React,{useState}from'react';import{useClient}from'../contexts/ClientContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const UploadPage=()=>{var _result$total_cogs_ca;const{client}=useClient();const[lotsFile,setLotsFile]=useState(null);const[salesFile,setSalesFile]=useState(null);const[processing,setProcessing]=useState(false);const[result,setResult]=useState(null);const[error,setError]=useState('');const[uploadProgress,setUploadProgress]=useState({lots:null,sales:null});const API_BASE=process.env.REACT_APP_API_URL||'http://localhost:8000';const handleFileChange=(type,event)=>{const file=event.target.files[0];if(!file)return;// Validate file type\nif(!file.name.endsWith('.csv')){setError(`Please select a CSV file for ${type}`);return;}if(type==='lots'){setLotsFile(file);setUploadProgress(prev=>({...prev,lots:null}));}else if(type==='sales'){setSalesFile(file);setUploadProgress(prev=>({...prev,sales:null}));}setError('');setResult(null);};const uploadFile=async(file,type)=>{const formData=new FormData();formData.append('file',file);formData.append('tenant_id',client.client_id);const response=await fetch(`${API_BASE}/api/v1/files/${type}`,{method:'POST',body:formData});if(!response.ok){const errorData=await response.json();throw new Error(errorData.detail||`Failed to upload ${type} file`);}return await response.json();};const processFiles=async()=>{if(!lotsFile||!salesFile){setError('Please select both purchase lots and sales files');return;}setProcessing(true);setError('');setResult(null);setUploadProgress({lots:'uploading',sales:'uploading'});try{// Upload lots file\nsetUploadProgress(prev=>({...prev,lots:'uploading'}));const lotsResult=await uploadFile(lotsFile,'lots');setUploadProgress(prev=>({...prev,lots:'uploaded'}));// Upload sales file  \nsetUploadProgress(prev=>({...prev,sales:'uploading'}));const salesResult=await uploadFile(salesFile,'sales');setUploadProgress(prev=>({...prev,sales:'uploaded'}));// Create and execute FIFO run\nsetUploadProgress(prev=>({...prev,lots:'processing',sales:'processing'}));const runResponse=await fetch(`${API_BASE}/api/v1/runs`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({tenant_id:client.client_id,lots_file_id:lotsResult.file_id,sales_file_id:salesResult.file_id,mode:'production'})});if(!runResponse.ok){const errorData=await runResponse.json();throw new Error(errorData.detail||'Failed to process FIFO calculation');}const runResult=await runResponse.json();setUploadProgress({lots:'completed',sales:'completed'});setResult({run_id:runResult.run_id,total_sales_processed:runResult.total_sales_processed,total_cogs_calculated:runResult.total_cogs_calculated,lots_uploaded:lotsResult.rows_count,sales_uploaded:salesResult.rows_count});}catch(err){console.error('Upload error:',err);setError(`Processing failed: ${err.message||err.toString()}`);setUploadProgress({lots:null,sales:null});}finally{setProcessing(false);}};const downloadTemplate=async type=>{try{const response=await fetch(`${API_BASE}/api/v1/files/templates/${type}`);if(!response.ok)throw new Error('Failed to download template');const blob=await response.blob();const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download=`${type}_template.csv`;document.body.appendChild(a);a.click();document.body.removeChild(a);URL.revokeObjectURL(url);}catch(err){setError(`Failed to download ${type} template: ${err.message}`);}};const getProgressIcon=status=>{switch(status){case'uploading':return'⏫';case'uploaded':return'✅';case'processing':return'⚙️';case'completed':return'🎉';default:return'';}};const getProgressText=status=>{switch(status){case'uploading':return'Uploading...';case'uploaded':return'Uploaded';case'processing':return'Processing...';case'completed':return'Complete';default:return'';}};return/*#__PURE__*/_jsxs(\"div\",{style:{minHeight:'100vh',backgroundColor:'#f3f4f6'},children:[/*#__PURE__*/_jsx(\"header\",{style:{backgroundColor:'white',boxShadow:'0 1px 3px rgba(0, 0, 0, 0.1)',padding:'1rem 2rem'},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'0.75rem'},children:[/*#__PURE__*/_jsx(\"div\",{style:{backgroundColor:'#10b981',color:'white',padding:'0.5rem',borderRadius:'4px',fontWeight:'bold',fontSize:'0.875rem'},children:\"[FL]\"}),/*#__PURE__*/_jsx(\"h1\",{style:{color:'#0f172a',margin:0},children:\"FirstLot\"}),/*#__PURE__*/_jsx(\"span\",{style:{color:'#6b7280',fontSize:'0.875rem'},children:\"Upload & Process\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'1rem'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#6b7280'},children:client.company_name}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.location.href='/dashboard',style:{backgroundColor:'#6b7280',color:'white',padding:'0.5rem 1rem',border:'none',borderRadius:'4px',cursor:'pointer'},children:\"\\u2190 Dashboard\"})]})]})}),/*#__PURE__*/_jsxs(\"main\",{style:{padding:'2rem',maxWidth:'1200px',margin:'0 auto'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:'#10b981',color:'white',padding:'1.5rem',borderRadius:'8px',marginBottom:'2rem',textAlign:'center'},children:[/*#__PURE__*/_jsx(\"h2\",{style:{color:'white',marginBottom:'1rem',fontSize:'1.5rem'},children:\"FIFO Processing Pipeline\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'center',alignItems:'center',gap:'2rem',fontSize:'0.875rem'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{opacity:lotsFile&&uploadProgress.lots?1:0.7},children:[getProgressIcon(uploadProgress.lots),\" Upload Lots\"]}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u2192\"}),/*#__PURE__*/_jsxs(\"div\",{style:{opacity:salesFile&&uploadProgress.sales?1:0.7},children:[getProgressIcon(uploadProgress.sales),\" Upload Sales\"]}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u2192\"}),/*#__PURE__*/_jsxs(\"div\",{style:{opacity:uploadProgress.lots==='processing'||result?1:0.7},children:[result?'🎉':'⚙️',\" Calculate COGS\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:'white',padding:'2rem',borderRadius:'8px',boxShadow:'0 1px 3px rgba(0, 0, 0, 0.1)',marginBottom:'2rem'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'1fr 1fr',gap:'2rem',marginBottom:'2rem'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{border:`2px dashed ${lotsFile?'#10b981':'#d1d5db'}`,borderRadius:'8px',padding:'2rem',textAlign:'center',backgroundColor:lotsFile?'#f0fdf4':'#fafafa',position:'relative'},children:[uploadProgress.lots&&/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',top:'0.5rem',right:'0.5rem',backgroundColor:'#10b981',color:'white',padding:'0.25rem 0.5rem',borderRadius:'4px',fontSize:'0.75rem'},children:getProgressText(uploadProgress.lots)}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'2rem',marginBottom:'1rem'},children:\"\\uD83D\\uDCE6\"}),/*#__PURE__*/_jsx(\"h3\",{style:{color:'#0f172a',marginBottom:'0.5rem'},children:\"Purchase Lots\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:'#6b7280',fontSize:'0.875rem',marginBottom:'1rem'},children:\"Inventory purchases with costs\"}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#10b981',fontSize:'0.75rem',marginBottom:'1rem'},children:\"Format: PO#, SKU, Date, Quantity, Cost\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\".csv\",onChange:e=>handleFileChange('lots',e),style:{display:'none'},id:\"lots-upload\",disabled:processing}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"lots-upload\",style:{display:'inline-block',backgroundColor:lotsFile?'#10b981':'#3b82f6',color:'white',padding:'0.75rem 1.5rem',borderRadius:'4px',cursor:processing?'not-allowed':'pointer',marginBottom:'1rem',opacity:processing?0.6:1},children:lotsFile?`✓ ${lotsFile.name}`:'Choose CSV File'}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>downloadTemplate('lots'),disabled:processing,style:{backgroundColor:'transparent',color:'#10b981',padding:'0.5rem',border:'none',cursor:processing?'not-allowed':'pointer',fontSize:'0.875rem',textDecoration:'underline',opacity:processing?0.6:1},children:\"Download Template \\u2192\"})})]}),/*#__PURE__*/_jsxs(\"div\",{style:{border:`2px dashed ${salesFile?'#10b981':'#d1d5db'}`,borderRadius:'8px',padding:'2rem',textAlign:'center',backgroundColor:salesFile?'#f0fdf4':'#fafafa',position:'relative'},children:[uploadProgress.sales&&/*#__PURE__*/_jsx(\"div\",{style:{position:'absolute',top:'0.5rem',right:'0.5rem',backgroundColor:'#10b981',color:'white',padding:'0.25rem 0.5rem',borderRadius:'4px',fontSize:'0.75rem'},children:getProgressText(uploadProgress.sales)}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'2rem',marginBottom:'1rem'},children:\"\\uD83D\\uDCCA\"}),/*#__PURE__*/_jsx(\"h3\",{style:{color:'#0f172a',marginBottom:'0.5rem'},children:\"Sales Data\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:'#6b7280',fontSize:'0.875rem',marginBottom:'1rem'},children:\"Monthly sales by SKU\"}),/*#__PURE__*/_jsx(\"div\",{style:{color:'#10b981',fontSize:'0.75rem',marginBottom:'1rem'},children:\"Format: SKU, Quantity, Month\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\".csv\",onChange:e=>handleFileChange('sales',e),style:{display:'none'},id:\"sales-upload\",disabled:processing}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"sales-upload\",style:{display:'inline-block',backgroundColor:salesFile?'#10b981':'#3b82f6',color:'white',padding:'0.75rem 1.5rem',borderRadius:'4px',cursor:processing?'not-allowed':'pointer',marginBottom:'1rem',opacity:processing?0.6:1},children:salesFile?`✓ ${salesFile.name}`:'Choose CSV File'}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>downloadTemplate('sales'),disabled:processing,style:{backgroundColor:'transparent',color:'#10b981',padding:'0.5rem',border:'none',cursor:processing?'not-allowed':'pointer',fontSize:'0.875rem',textDecoration:'underline',opacity:processing?0.6:1},children:\"Download Template \\u2192\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:processFiles,disabled:!lotsFile||!salesFile||processing,style:{backgroundColor:!lotsFile||!salesFile||processing?'#9ca3af':'#10b981',color:'white',padding:'1rem 3rem',border:'none',borderRadius:'8px',cursor:!lotsFile||!salesFile||processing?'not-allowed':'pointer',fontSize:'1.125rem',fontWeight:'600',minWidth:'200px'},children:processing?'⏳ Processing FIFO...':!lotsFile||!salesFile?'Select Both Files':'🚀 Process FIFO COGS'}),(!lotsFile||!salesFile)&&!processing&&/*#__PURE__*/_jsx(\"p\",{style:{color:'#6b7280',fontSize:'0.875rem',marginTop:'0.5rem'},children:\"Both files are required for accurate FIFO calculation\"})]})]}),error&&/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:'#fef2f2',border:'1px solid #fca5a5',color:'#dc2626',padding:'1rem',borderRadius:'8px',marginBottom:'2rem'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{margin:'0 0 0.5rem 0'},children:\"\\u26A0\\uFE0F Error\"}),/*#__PURE__*/_jsx(\"p\",{style:{margin:0},children:error})]}),result&&/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:'white',padding:'2rem',borderRadius:'8px',boxShadow:'0 1px 3px rgba(0, 0, 0, 0.1)'},children:[/*#__PURE__*/_jsx(\"h2\",{style:{color:'#0f172a',marginBottom:'1.5rem'},children:\"\\u2705 FIFO Processing Complete!\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(auto-fit, minmax(200px, 1fr))',gap:'1rem',marginBottom:'2rem'},children:[/*#__PURE__*/_jsx(StatCard,{title:\"Run ID\",value:result.run_id}),/*#__PURE__*/_jsx(StatCard,{title:\"Sales Records\",value:result.total_sales_processed}),/*#__PURE__*/_jsx(StatCard,{title:\"Lots Records\",value:result.lots_uploaded}),/*#__PURE__*/_jsx(StatCard,{title:\"Total COGS\",value:`$${((_result$total_cogs_ca=result.total_cogs_calculated)===null||_result$total_cogs_ca===void 0?void 0:_result$total_cogs_ca.toFixed(2))||'0.00'}`})]}),/*#__PURE__*/_jsx(\"div\",{style:{backgroundColor:'#f0fdf4',border:'1px solid #10b981',padding:'1rem',borderRadius:'4px',marginBottom:'1rem'},children:/*#__PURE__*/_jsx(\"p\",{style:{margin:0,color:'#374151'},children:\"\\uD83C\\uDF89 Your FIFO calculation has been completed successfully! You can now view your lot history and monthly COGS reports.\"})}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'1rem'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.location.href='/lot-history',style:{backgroundColor:'#10b981',color:'white',padding:'0.75rem 1.5rem',border:'none',borderRadius:'4px',cursor:'pointer',fontSize:'1rem'},children:\"View Lot History\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.location.href='/monthly-cogs',style:{backgroundColor:'#10b981',color:'white',padding:'0.75rem 1.5rem',border:'none',borderRadius:'4px',cursor:'pointer',fontSize:'1rem'},children:\"View Monthly COGS\"})]})]})]})]});};const StatCard=_ref=>{let{title,value}=_ref;return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'1rem',backgroundColor:'#f9fafb',border:'1px solid #e5e7eb',borderRadius:'4px',textAlign:'center'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'1.5rem',fontWeight:'bold',color:'#0f172a'},children:value}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'0.875rem',color:'#6b7280',marginTop:'0.25rem'},children:title})]});};export default UploadPage;","map":{"version":3,"names":["React","useState","useClient","jsx","_jsx","jsxs","_jsxs","UploadPage","_result$total_cogs_ca","client","lotsFile","setLotsFile","salesFile","setSalesFile","processing","setProcessing","result","setResult","error","setError","uploadProgress","setUploadProgress","lots","sales","API_BASE","process","env","REACT_APP_API_URL","handleFileChange","type","event","file","target","files","name","endsWith","prev","uploadFile","formData","FormData","append","client_id","response","fetch","method","body","ok","errorData","json","Error","detail","processFiles","lotsResult","salesResult","runResponse","headers","JSON","stringify","tenant_id","lots_file_id","file_id","sales_file_id","mode","runResult","run_id","total_sales_processed","total_cogs_calculated","lots_uploaded","rows_count","sales_uploaded","err","console","message","toString","downloadTemplate","blob","url","URL","createObjectURL","a","document","createElement","href","download","appendChild","click","removeChild","revokeObjectURL","getProgressIcon","status","getProgressText","style","minHeight","backgroundColor","children","boxShadow","padding","display","justifyContent","alignItems","gap","color","borderRadius","fontWeight","fontSize","margin","company_name","onClick","window","location","border","cursor","maxWidth","marginBottom","textAlign","opacity","gridTemplateColumns","position","top","right","accept","onChange","e","id","disabled","htmlFor","textDecoration","minWidth","marginTop","StatCard","title","value","toFixed","_ref"],"sources":["/Users/jeffreydebolt/Documents/fifo/cogs-dashboard/src/pages/UploadPage.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useClient } from '../contexts/ClientContext';\n\nconst UploadPage = () => {\n  const { client } = useClient();\n  const [lotsFile, setLotsFile] = useState(null);\n  const [salesFile, setSalesFile] = useState(null);\n  const [processing, setProcessing] = useState(false);\n  const [result, setResult] = useState(null);\n  const [error, setError] = useState('');\n  const [uploadProgress, setUploadProgress] = useState({ lots: null, sales: null });\n\n  const API_BASE = process.env.REACT_APP_API_URL || 'http://localhost:8000';\n\n  const handleFileChange = (type, event) => {\n    const file = event.target.files[0];\n    if (!file) return;\n\n    // Validate file type\n    if (!file.name.endsWith('.csv')) {\n      setError(`Please select a CSV file for ${type}`);\n      return;\n    }\n\n    if (type === 'lots') {\n      setLotsFile(file);\n      setUploadProgress(prev => ({ ...prev, lots: null }));\n    } else if (type === 'sales') {\n      setSalesFile(file);\n      setUploadProgress(prev => ({ ...prev, sales: null }));\n    }\n    setError('');\n    setResult(null);\n  };\n\n  const uploadFile = async (file, type) => {\n    const formData = new FormData();\n    formData.append('file', file);\n    formData.append('tenant_id', client.client_id);\n\n    const response = await fetch(`${API_BASE}/api/v1/files/${type}`, {\n      method: 'POST',\n      body: formData,\n    });\n\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(errorData.detail || `Failed to upload ${type} file`);\n    }\n\n    return await response.json();\n  };\n\n  const processFiles = async () => {\n    if (!lotsFile || !salesFile) {\n      setError('Please select both purchase lots and sales files');\n      return;\n    }\n\n    setProcessing(true);\n    setError('');\n    setResult(null);\n    setUploadProgress({ lots: 'uploading', sales: 'uploading' });\n\n    try {\n      // Upload lots file\n      setUploadProgress(prev => ({ ...prev, lots: 'uploading' }));\n      const lotsResult = await uploadFile(lotsFile, 'lots');\n      setUploadProgress(prev => ({ ...prev, lots: 'uploaded' }));\n\n      // Upload sales file  \n      setUploadProgress(prev => ({ ...prev, sales: 'uploading' }));\n      const salesResult = await uploadFile(salesFile, 'sales');\n      setUploadProgress(prev => ({ ...prev, sales: 'uploaded' }));\n\n      // Create and execute FIFO run\n      setUploadProgress(prev => ({ ...prev, lots: 'processing', sales: 'processing' }));\n      \n      const runResponse = await fetch(`${API_BASE}/api/v1/runs`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          tenant_id: client.client_id,\n          lots_file_id: lotsResult.file_id,\n          sales_file_id: salesResult.file_id,\n          mode: 'production'\n        })\n      });\n\n      if (!runResponse.ok) {\n        const errorData = await runResponse.json();\n        throw new Error(errorData.detail || 'Failed to process FIFO calculation');\n      }\n\n      const runResult = await runResponse.json();\n      \n      setUploadProgress({ lots: 'completed', sales: 'completed' });\n      setResult({\n        run_id: runResult.run_id,\n        total_sales_processed: runResult.total_sales_processed,\n        total_cogs_calculated: runResult.total_cogs_calculated,\n        lots_uploaded: lotsResult.rows_count,\n        sales_uploaded: salesResult.rows_count\n      });\n\n    } catch (err) {\n      console.error('Upload error:', err);\n      setError(`Processing failed: ${err.message || err.toString()}`);\n      setUploadProgress({ lots: null, sales: null });\n    } finally {\n      setProcessing(false);\n    }\n  };\n\n  const downloadTemplate = async (type) => {\n    try {\n      const response = await fetch(`${API_BASE}/api/v1/files/templates/${type}`);\n      if (!response.ok) throw new Error('Failed to download template');\n      \n      const blob = await response.blob();\n      const url = URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = `${type}_template.csv`;\n      document.body.appendChild(a);\n      a.click();\n      document.body.removeChild(a);\n      URL.revokeObjectURL(url);\n    } catch (err) {\n      setError(`Failed to download ${type} template: ${err.message}`);\n    }\n  };\n\n  const getProgressIcon = (status) => {\n    switch (status) {\n      case 'uploading': return '⏫';\n      case 'uploaded': return '✅';\n      case 'processing': return '⚙️';\n      case 'completed': return '🎉';\n      default: return '';\n    }\n  };\n\n  const getProgressText = (status) => {\n    switch (status) {\n      case 'uploading': return 'Uploading...';\n      case 'uploaded': return 'Uploaded';\n      case 'processing': return 'Processing...';\n      case 'completed': return 'Complete';\n      default: return '';\n    }\n  };\n\n  return (\n    <div style={{ minHeight: '100vh', backgroundColor: '#f3f4f6' }}>\n      {/* Header */}\n      <header style={{\n        backgroundColor: 'white',\n        boxShadow: '0 1px 3px rgba(0, 0, 0, 0.1)',\n        padding: '1rem 2rem'\n      }}>\n        <div style={{\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center'\n        }}>\n          <div style={{ display: 'flex', alignItems: 'center', gap: '0.75rem' }}>\n            <div style={{\n              backgroundColor: '#10b981',\n              color: 'white',\n              padding: '0.5rem',\n              borderRadius: '4px',\n              fontWeight: 'bold',\n              fontSize: '0.875rem'\n            }}>\n              [FL]\n            </div>\n            <h1 style={{ color: '#0f172a', margin: 0 }}>FirstLot</h1>\n            <span style={{ color: '#6b7280', fontSize: '0.875rem' }}>Upload & Process</span>\n          </div>\n          <div style={{ display: 'flex', alignItems: 'center', gap: '1rem' }}>\n            <span style={{ color: '#6b7280' }}>\n              {client.company_name}\n            </span>\n            <button\n              onClick={() => window.location.href = '/dashboard'}\n              style={{\n                backgroundColor: '#6b7280',\n                color: 'white',\n                padding: '0.5rem 1rem',\n                border: 'none',\n                borderRadius: '4px',\n                cursor: 'pointer'\n              }}\n            >\n              ← Dashboard\n            </button>\n          </div>\n        </div>\n      </header>\n\n      <main style={{ padding: '2rem', maxWidth: '1200px', margin: '0 auto' }}>\n        {/* Process Overview */}\n        <div style={{\n          backgroundColor: '#10b981',\n          color: 'white',\n          padding: '1.5rem',\n          borderRadius: '8px',\n          marginBottom: '2rem',\n          textAlign: 'center'\n        }}>\n          <h2 style={{ color: 'white', marginBottom: '1rem', fontSize: '1.5rem' }}>FIFO Processing Pipeline</h2>\n          <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', gap: '2rem', fontSize: '0.875rem' }}>\n            <div style={{ opacity: (lotsFile && uploadProgress.lots) ? 1 : 0.7 }}>\n              {getProgressIcon(uploadProgress.lots)} Upload Lots\n            </div>\n            <span>→</span>\n            <div style={{ opacity: (salesFile && uploadProgress.sales) ? 1 : 0.7 }}>\n              {getProgressIcon(uploadProgress.sales)} Upload Sales\n            </div>\n            <span>→</span>\n            <div style={{ opacity: (uploadProgress.lots === 'processing' || result) ? 1 : 0.7 }}>\n              {result ? '🎉' : '⚙️'} Calculate COGS\n            </div>\n          </div>\n        </div>\n\n        {/* File Upload Section */}\n        <div style={{\n          backgroundColor: 'white',\n          padding: '2rem',\n          borderRadius: '8px',\n          boxShadow: '0 1px 3px rgba(0, 0, 0, 0.1)',\n          marginBottom: '2rem'\n        }}>\n          <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '2rem', marginBottom: '2rem' }}>\n            \n            {/* Purchase Lots Upload */}\n            <div style={{\n              border: `2px dashed ${lotsFile ? '#10b981' : '#d1d5db'}`,\n              borderRadius: '8px',\n              padding: '2rem',\n              textAlign: 'center',\n              backgroundColor: lotsFile ? '#f0fdf4' : '#fafafa',\n              position: 'relative'\n            }}>\n              {uploadProgress.lots && (\n                <div style={{\n                  position: 'absolute',\n                  top: '0.5rem',\n                  right: '0.5rem',\n                  backgroundColor: '#10b981',\n                  color: 'white',\n                  padding: '0.25rem 0.5rem',\n                  borderRadius: '4px',\n                  fontSize: '0.75rem'\n                }}>\n                  {getProgressText(uploadProgress.lots)}\n                </div>\n              )}\n              \n              <div style={{ fontSize: '2rem', marginBottom: '1rem' }}>📦</div>\n              <h3 style={{ color: '#0f172a', marginBottom: '0.5rem' }}>Purchase Lots</h3>\n              <p style={{ color: '#6b7280', fontSize: '0.875rem', marginBottom: '1rem' }}>\n                Inventory purchases with costs\n              </p>\n              <div style={{ color: '#10b981', fontSize: '0.75rem', marginBottom: '1rem' }}>\n                Format: PO#, SKU, Date, Quantity, Cost\n              </div>\n              \n              <input\n                type=\"file\"\n                accept=\".csv\"\n                onChange={(e) => handleFileChange('lots', e)}\n                style={{ display: 'none' }}\n                id=\"lots-upload\"\n                disabled={processing}\n              />\n              \n              <label\n                htmlFor=\"lots-upload\"\n                style={{\n                  display: 'inline-block',\n                  backgroundColor: lotsFile ? '#10b981' : '#3b82f6',\n                  color: 'white',\n                  padding: '0.75rem 1.5rem',\n                  borderRadius: '4px',\n                  cursor: processing ? 'not-allowed' : 'pointer',\n                  marginBottom: '1rem',\n                  opacity: processing ? 0.6 : 1\n                }}\n              >\n                {lotsFile ? `✓ ${lotsFile.name}` : 'Choose CSV File'}\n              </label>\n              \n              <div>\n                <button\n                  onClick={() => downloadTemplate('lots')}\n                  disabled={processing}\n                  style={{\n                    backgroundColor: 'transparent',\n                    color: '#10b981',\n                    padding: '0.5rem',\n                    border: 'none',\n                    cursor: processing ? 'not-allowed' : 'pointer',\n                    fontSize: '0.875rem',\n                    textDecoration: 'underline',\n                    opacity: processing ? 0.6 : 1\n                  }}\n                >\n                  Download Template →\n                </button>\n              </div>\n            </div>\n\n            {/* Sales Upload */}\n            <div style={{\n              border: `2px dashed ${salesFile ? '#10b981' : '#d1d5db'}`,\n              borderRadius: '8px',\n              padding: '2rem',\n              textAlign: 'center',\n              backgroundColor: salesFile ? '#f0fdf4' : '#fafafa',\n              position: 'relative'\n            }}>\n              {uploadProgress.sales && (\n                <div style={{\n                  position: 'absolute',\n                  top: '0.5rem',\n                  right: '0.5rem',\n                  backgroundColor: '#10b981',\n                  color: 'white',\n                  padding: '0.25rem 0.5rem',\n                  borderRadius: '4px',\n                  fontSize: '0.75rem'\n                }}>\n                  {getProgressText(uploadProgress.sales)}\n                </div>\n              )}\n              \n              <div style={{ fontSize: '2rem', marginBottom: '1rem' }}>📊</div>\n              <h3 style={{ color: '#0f172a', marginBottom: '0.5rem' }}>Sales Data</h3>\n              <p style={{ color: '#6b7280', fontSize: '0.875rem', marginBottom: '1rem' }}>\n                Monthly sales by SKU\n              </p>\n              <div style={{ color: '#10b981', fontSize: '0.75rem', marginBottom: '1rem' }}>\n                Format: SKU, Quantity, Month\n              </div>\n              \n              <input\n                type=\"file\"\n                accept=\".csv\"\n                onChange={(e) => handleFileChange('sales', e)}\n                style={{ display: 'none' }}\n                id=\"sales-upload\"\n                disabled={processing}\n              />\n              \n              <label\n                htmlFor=\"sales-upload\"\n                style={{\n                  display: 'inline-block',\n                  backgroundColor: salesFile ? '#10b981' : '#3b82f6',\n                  color: 'white',\n                  padding: '0.75rem 1.5rem',\n                  borderRadius: '4px',\n                  cursor: processing ? 'not-allowed' : 'pointer',\n                  marginBottom: '1rem',\n                  opacity: processing ? 0.6 : 1\n                }}\n              >\n                {salesFile ? `✓ ${salesFile.name}` : 'Choose CSV File'}\n              </label>\n              \n              <div>\n                <button\n                  onClick={() => downloadTemplate('sales')}\n                  disabled={processing}\n                  style={{\n                    backgroundColor: 'transparent',\n                    color: '#10b981',\n                    padding: '0.5rem',\n                    border: 'none',\n                    cursor: processing ? 'not-allowed' : 'pointer',\n                    fontSize: '0.875rem',\n                    textDecoration: 'underline',\n                    opacity: processing ? 0.6 : 1\n                  }}\n                >\n                  Download Template →\n                </button>\n              </div>\n            </div>\n          </div>\n\n          {/* Process Button */}\n          <div style={{ textAlign: 'center' }}>\n            <button\n              onClick={processFiles}\n              disabled={!lotsFile || !salesFile || processing}\n              style={{\n                backgroundColor: (!lotsFile || !salesFile || processing) ? '#9ca3af' : '#10b981',\n                color: 'white',\n                padding: '1rem 3rem',\n                border: 'none',\n                borderRadius: '8px',\n                cursor: (!lotsFile || !salesFile || processing) ? 'not-allowed' : 'pointer',\n                fontSize: '1.125rem',\n                fontWeight: '600',\n                minWidth: '200px'\n              }}\n            >\n              {processing ? '⏳ Processing FIFO...' : \n               (!lotsFile || !salesFile) ? 'Select Both Files' :\n               '🚀 Process FIFO COGS'}\n            </button>\n            \n            {(!lotsFile || !salesFile) && !processing && (\n              <p style={{ color: '#6b7280', fontSize: '0.875rem', marginTop: '0.5rem' }}>\n                Both files are required for accurate FIFO calculation\n              </p>\n            )}\n          </div>\n        </div>\n\n        {/* Error Display */}\n        {error && (\n          <div style={{\n            backgroundColor: '#fef2f2',\n            border: '1px solid #fca5a5',\n            color: '#dc2626',\n            padding: '1rem',\n            borderRadius: '8px',\n            marginBottom: '2rem'\n          }}>\n            <h3 style={{ margin: '0 0 0.5rem 0' }}>⚠️ Error</h3>\n            <p style={{ margin: 0 }}>{error}</p>\n          </div>\n        )}\n\n        {/* Success Results */}\n        {result && (\n          <div style={{\n            backgroundColor: 'white',\n            padding: '2rem',\n            borderRadius: '8px',\n            boxShadow: '0 1px 3px rgba(0, 0, 0, 0.1)'\n          }}>\n            <h2 style={{ color: '#0f172a', marginBottom: '1.5rem' }}>✅ FIFO Processing Complete!</h2>\n            \n            <div style={{ \n              display: 'grid', \n              gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))', \n              gap: '1rem',\n              marginBottom: '2rem'\n            }}>\n              <StatCard title=\"Run ID\" value={result.run_id} />\n              <StatCard title=\"Sales Records\" value={result.total_sales_processed} />\n              <StatCard title=\"Lots Records\" value={result.lots_uploaded} />\n              <StatCard title=\"Total COGS\" value={`$${result.total_cogs_calculated?.toFixed(2) || '0.00'}`} />\n            </div>\n\n            <div style={{\n              backgroundColor: '#f0fdf4',\n              border: '1px solid #10b981',\n              padding: '1rem',\n              borderRadius: '4px',\n              marginBottom: '1rem'\n            }}>\n              <p style={{ margin: 0, color: '#374151' }}>\n                🎉 Your FIFO calculation has been completed successfully! \n                You can now view your lot history and monthly COGS reports.\n              </p>\n            </div>\n\n            <div style={{ display: 'flex', gap: '1rem' }}>\n              <button\n                onClick={() => window.location.href = '/lot-history'}\n                style={{\n                  backgroundColor: '#10b981',\n                  color: 'white',\n                  padding: '0.75rem 1.5rem',\n                  border: 'none',\n                  borderRadius: '4px',\n                  cursor: 'pointer',\n                  fontSize: '1rem'\n                }}\n              >\n                View Lot History\n              </button>\n              <button\n                onClick={() => window.location.href = '/monthly-cogs'}\n                style={{\n                  backgroundColor: '#10b981',\n                  color: 'white',\n                  padding: '0.75rem 1.5rem',\n                  border: 'none',\n                  borderRadius: '4px',\n                  cursor: 'pointer',\n                  fontSize: '1rem'\n                }}\n              >\n                View Monthly COGS\n              </button>\n            </div>\n          </div>\n        )}\n      </main>\n    </div>\n  );\n};\n\nconst StatCard = ({ title, value }) => (\n  <div style={{\n    padding: '1rem',\n    backgroundColor: '#f9fafb',\n    border: '1px solid #e5e7eb',\n    borderRadius: '4px',\n    textAlign: 'center'\n  }}>\n    <div style={{ fontSize: '1.5rem', fontWeight: 'bold', color: '#0f172a' }}>\n      {value}\n    </div>\n    <div style={{ fontSize: '0.875rem', color: '#6b7280', marginTop: '0.25rem' }}>\n      {title}\n    </div>\n  </div>\n);\n\nexport default UploadPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}